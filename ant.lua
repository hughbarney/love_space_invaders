-- 4 nov 2013
-- ant on a rubber rope
-- http://en.wikipedia.org/wiki/Ant_on_a_rubber_rope

printf = function(s,...) return io.write(s:format(...)) end

a = 0   -- start position in length units
l = 100  -- start length
r = 1   -- rate of crawl in length units
s = 50   -- rate of stretch in length units
p = 0   -- % of position along 
n = 0   -- iteration

while p < 100 do
   -- we calculate ants new pos as
   -- last pos + crawl rate + stretch proportion on left against length at start of crawl

   a = (a + r) + (s * (a + r)) / l
   p = math.floor((100 * a) / l)
   l = l + s

   -- print progress when % increased by 1%
   if p ~= pp then 
	  printf("%d, %f, %d, %f\n",  n, a, p, l)
   end 
   n = n + 1
   pp = p
end

--[[

output when using:

a = 0  -- start position in length units
l = 100  -- start length
r = 1  -- rate of crawl in length units
s = 4  -- rate of stretch in length units
p = 0  -- fraction of position along 
n = 0  -- iteration
pp = 0 -- previous p

0, 1.040000, 1, 104.000000
1, 2.118462, 2, 108.000000
3, 4.385173, 3, 116.000000
4, 5.570869, 4, 120.000000
5, 6.789898, 5, 124.000000
6, 8.041185, 6, 128.000000
7, 9.323722, 7, 132.000000
8, 10.636562, 8, 136.000000
10, 13.349637, 9, 144.000000
11, 14.748238, 10, 148.000000
13, 17.625810, 11, 156.000000
14, 19.103394, 12, 160.000000
16, 22.132954, 13, 168.000000
17, 23.683739, 14, 172.000000
19, 26.854547, 15, 180.000000
21, 30.114266, 16, 188.000000
23, 33.459111, 17, 196.000000
25, 36.885605, 18, 204.000000
27, 40.390546, 19, 212.000000
29, 43.970972, 20, 220.000000
31, 47.624137, 21, 228.000000
33, 51.347489, 22, 236.000000
36, 57.058952, 23, 248.000000
38, 60.947694, 24, 256.000000
41, 66.897413, 25, 268.000000
43, 70.938908, 26, 276.000000
46, 77.109342, 27, 288.000000
49, 83.404809, 28, 300.000000
52, 89.820304, 29, 312.000000
55, 96.351209, 30, 324.000000
58, 102.993248, 31, 336.000000
62, 112.015352, 32, 352.000000
65, 118.901731, 33, 364.000000
69, 128.236889, 34, 380.000000
73, 137.740515, 35, 396.000000
77, 147.405798, 36, 412.000000
81, 157.226458, 37, 428.000000
86, 169.711968, 38, 448.000000
90, 179.861612, 39, 464.000000
95, 192.742123, 40, 484.000000
100, 205.829302, 41, 504.000000
105, 219.114944, 42, 524.000000
110, 232.591470, 43, 544.000000
116, 249.005419, 44, 568.000000
121, 262.877874, 45, 588.000000
127, 279.748853, 46, 612.000000
134, 299.728488, 47, 640.000000
140, 317.098214, 48, 664.000000
147, 337.636509, 49, 692.000000
154, 358.458118, 50, 720.000000
161, 379.552016, 51, 748.000000
169, 403.979697, 52, 780.000000
177, 428.735673, 53, 812.000000
185, 453.807001, 54, 844.000000
194, 482.374329, 55, 880.000000
203, 511.309939, 56, 916.000000
212, 540.599352, 57, 952.000000
222, 573.541850, 58, 992.000000
232, 606.887682, 59, 1032.000000
243, 644.015315, 60, 1076.000000
254, 681.592888, 61, 1120.000000
265, 719.602713, 62, 1164.000000
277, 761.541784, 63, 1212.000000
289, 803.956225, 64, 1260.000000
302, 850.420665, 65, 1312.000000
316, 901.035089, 66, 1368.000000
330, 952.222772, 67, 1424.000000
344, 1003.961157, 68, 1480.000000
359, 1059.982600, 69, 1540.000000
375, 1120.382577, 70, 1604.000000
392, 1185.256669, 71, 1672.000000
409, 1250.822339, 72, 1740.000000
426, 1317.052545, 73, 1808.000000
445, 1391.830262, 74, 1884.000000
464, 1467.374640, 75, 1960.000000
484, 1547.690625, 76, 2040.000000
505, 1632.866202, 77, 2124.000000
527, 1722.988215, 78, 2212.000000
549, 1813.985684, 79, 2300.000000
573, 1914.214793, 80, 2396.000000
597, 2015.405762, 81, 2492.000000
623, 2126.071814, 82, 2596.000000
649, 2237.779747, 83, 2700.000000
677, 2359.199790, 84, 2812.000000
706, 2486.131703, 85, 2928.000000
736, 2618.649371, 86, 3048.000000
767, 2756.824897, 87, 3172.000000
799, 2900.728620, 88, 3300.000000
833, 3054.985588, 89, 3436.000000
868, 3215.185063, 90, 3576.000000
905, 3386.028018, 91, 3724.000000
943, 3563.018828, 92, 3876.000000
982, 3746.216701, 93, 4032.000000
1024, 3945.192997, 94, 4200.000000
1066, 4145.849742, 95, 4368.000000
1111, 4362.630527, 96, 4548.000000
1158, 4590.946912, 97, 4736.000000
1206, 4826.046742, 98, 4928.000000
1256, 5072.930483, 99, 5128.000000
1309, 5336.755255, 100, 5340.000000
--]]